doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    meta(http-equiv="X-UA-Compatible", content="ie=edge")
    link(rel="stylesheet", href="/dist/style.css")
    link(rel="shortcut icon", type="image/png", href="/images/icons/favicon.png")
    title= `${title} | ${siteName}`
  body
    block header
      nav.navbar.is-light
        .navbar-brand
          a.navbar-item(href="/")
            img(src="/images/icons/logo.png", alt="Voting App")
          .navbar-burger.burger(data-target="navMenu")
            span
            span
            span
        #navMenu.navbar-menu
          .navbar-start
            a.navbar-item(href="/")
              span Home
          .navbar-end
            if user
              .navbar-item.has-dropdown.is-hoverable
                a.navbar-link(href="/profile")
                  | #{user.name}
                .navbar-dropdown.is-boxed
                  a.navbar-item(href="/poll/new")
                    | New Poll
                  hr.navbar-divider
                  a.navbar-item(href="/profile")
                    | User Profile
                  a.navbar-item(href="/poll/user")
                    | User Polls
                  hr.navbar-divider
                  a.navbar-item(href="/poll/all")
                    | All Polls
              .navbar-item
                .field
                  p.control
                    form(action="/logout", method="POST")
                      input(type="hidden", name="_csrf", value=csrfToken)
                      button.button.is-primary
                        span.icon
                          i.fas.fa-sign-out-alt(aria-hidden="true")
                        span Logout
            else
              a.navbar-item(href="/register")
                span Register
              .navbar-item
                .field
                  p.control
                    a.button.is-primary(href="/login")
                      span.icon
                        i.fas.fa-sign-in-alt(aria-hidden="true")
                      spak Login
    - const categories = Object.keys(flashes);
    if categories.length
      block messages
        .section
          .columns
            .column.is-half.is-offset-one-quarter
              each category in categories
                each message in flashes[category]
                  - const isType = category ? `is-${category === 'error' ? 'danger' : category}` : 'is-primary'
                  article.message(class=isType)
                    .message-header
                      p= h.capitalize(category)
                      button.delete(aria-label="delete")
                    .message-body
                      = message
    main
      block content
        p This should not be visible!
    block scripts
      script(src="https://use.fontawesome.com/releases/v5.0.7/js/all.js")
      script(src="/scripts/script.js")
